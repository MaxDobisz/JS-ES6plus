!function(){"use strict";class e{constructor(e){this.imagesSelector=e,this.imagesList=document.querySelectorAll(this.imagesSelector),this.sliderRootElement=document.querySelector(".js-slider"),this.navNext=document.querySelector(".js-slider__nav--next"),this.navPrev=document.querySelector(".js-slider__nav--prev"),this.interval=""}run(){this.initEvents(),this.initCustomEvents()}initEvents(){var e=this.imagesList,t=this.sliderRootElement,s=this.navPrev,r=this.navNext;e.forEach((e=>{e.addEventListener("click",(e=>{var t=e.currentTarget;return this.fireCustomEvent(t,"js-slider-img-click")})),e.addEventListener("click",(e=>{var t=e.currentTarget;return this.fireCustomEvent(t,"js-slider-start")}))})),r&&(r.addEventListener("click",(()=>this.fireCustomEvent(t,"js-slider-img-next"))),r.addEventListener("mouseover",(e=>{var t=e.currentTarget;return this.fireCustomEvent(t,"js-slider-stop")})),r.addEventListener("mouseleave",(()=>this.nextAuto()))),s&&(s.addEventListener("click",(()=>this.fireCustomEvent(t,"js-slider-img-prev"))),s.addEventListener("mouseover",(e=>{var t=e.currentTarget;return this.fireCustomEvent(t,"js-slider-stop")})),s.addEventListener("mouseleave",(()=>this.nextAuto())));var i=t.querySelector(".js-slider__zoom");i&&i.addEventListener("click",(e=>{e.target===e.currentTarget&&this.fireCustomEvent(t,"js-slider-close")}))}fireCustomEvent(e,t){var s=new CustomEvent(t,{bubbles:!0});e.dispatchEvent(s)}initCustomEvents(){var e=this.imagesList,t=this.sliderRootElement,s=this.navPrev,r=this.navNext;e.forEach((e=>{e.addEventListener("js-slider-img-click",(e=>this.onImageClick(e))),e.addEventListener("js-slider-start",(()=>this.nextAuto()))})),t.addEventListener("js-slider-img-next",this.onImageNext),t.addEventListener("js-slider-img-prev",this.onImagePrev),t.addEventListener("js-slider-close",this.onClose),t.addEventListener("js-slider-close",(()=>this.clear())),r.addEventListener("js-slider-stop",(()=>this.clear())),s.addEventListener("js-slider-stop",(()=>this.clear()))}onImageClick(e){var t=e.currentTarget,s=this.sliderRootElement,r=this.imagesSelector;s.classList.add("js-slider--active");var i=t.querySelector("img").src;s.querySelector(".js-slider__image").src=i;var l=t.dataset.sliderGroupName,n=document.querySelectorAll(r+"[data-slider-group-name="+l+"]"),a=document.querySelector(".js-slider__thumbs-item--prototype");n.forEach((e=>{var t=a.cloneNode(!0);t.classList.remove("js-slider__thumbs-item--prototype");var s=t.querySelector("img");s.src=e.querySelector("img").src,s.src===i&&s.classList.add("js-slider__thumbs-image--current"),document.querySelector(".js-slider__thumbs").appendChild(t)}))}onImageNext(){var e=this.querySelector(".js-slider__thumbs-image--current"),t=e.parentElement.nextElementSibling,s=this.querySelector(".js-slider__image");if(t){e.classList.remove("js-slider__thumbs-image--current"),t.firstElementChild.classList.add("js-slider__thumbs-image--current");var r=t.firstElementChild.getAttribute("src");s.setAttribute("src",r)}else{var i=this.querySelector(".js-slider__thumbs-item--prototype").nextElementSibling;e.classList.remove("js-slider__thumbs-image--current"),i.firstElementChild.classList.add("js-slider__thumbs-image--current");var l=i.firstElementChild.getAttribute("src");s.setAttribute("src",l)}}onImagePrev(){var e=this.querySelector(".js-slider__thumbs-image--current"),t=e.parentElement.previousElementSibling,s=t.className,r=this.querySelector(".js-slider__image");if(s.includes("js-slider__thumbs-item--prototype")){var i=this.querySelector(".js-slider__thumbs-item--prototype").parentElement.lastElementChild;e.classList.remove("js-slider__thumbs-image--current"),i.firstElementChild.classList.add("js-slider__thumbs-image--current");var l=i.firstElementChild.getAttribute("src");r.setAttribute("src",l)}else{e.classList.remove("js-slider__thumbs-image--current"),t.firstElementChild.classList.add("js-slider__thumbs-image--current");var n=t.firstElementChild.getAttribute("src");r.setAttribute("src",n)}}onClose(e){e.currentTarget.classList.remove("js-slider--active"),this.querySelectorAll(".js-slider__thumbs-item:not(.js-slider__thumbs-item--prototype)").forEach((e=>e.parentElement.removeChild(e)))}nextAuto(){var e=this.sliderRootElement;this.interval=setInterval((()=>{this.fireCustomEvent(e,"js-slider-img-next")}),2e3)}clear(){clearInterval(this.interval)}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".gallery__item").forEach((e=>{e.dataset.sliderGroupName=Math.random()>.5?"nice":"good"})),new e(".gallery__item").run()}))}();